package GUIs;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import javax.swing.*;
import javax.swing.table.DefaultTableModel;

import estoque.Conexao;



public class Update extends JFrame {

	
	private JPanel painel;
	private DefaultTableModel modelo = new DefaultTableModel();
	private JTextField antesDoUpdate;
	private JTextField depoisDoUpdate;
	static Update frame = new Update();
	
	public static void main() {
		
		frame.criaJanela();
		frame.setLocationRelativeTo(null);
		frame.setVisible(true);
	}
	
	public Update() {
		super("ATUALIZAR ESTOQUE");
		criaJanela();
		setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
		setContentPane(painel);
		
		// legenda geral
		JLabel lblNewLabel = new JLabel("EDITAR PRODUTOS: ");
		lblNewLabel.setForeground(Color.RED);
		lblNewLabel.setFont(new Font("Arial", Font.PLAIN, 14));
		lblNewLabel.setBounds(110, 11, 389, 14);
		painel.add(lblNewLabel);
					
				
	}
	
	
	@SuppressWarnings("unchecked")
	public void criaJanela() {
		painel = new JPanel();
		painel.setLayout(null);
		setBounds(100, 100, 376, 194);
		
		// --------- CRIA플O DOS COMPONENTES ------------ //
		
				// LEGENDA
				JLabel legendaAntes = new JLabel("ONDE O ");
				legendaAntes.setForeground(Color.RED);
				legendaAntes.setFont(new Font("Arial", Font.PLAIN, 10));
				legendaAntes.setBounds(10, 76, 389, 14);
				painel.add(legendaAntes);
				
				// CAIXA DE SELE플O
				JComboBox coluna = new JComboBox();
				coluna.setModel(new DefaultComboBoxModel(new String[] {"id", "setor", "modelo", "tamanho", "cor"}));
				coluna.setBounds(55, 75, 90, 18);
				painel.add(coluna);
				
				// LEGENDA
				JLabel legendaIgual = new JLabel(" FOR IGUAL A");
				legendaIgual.setForeground(Color.RED);
				legendaIgual.setFont(new Font("Arial", Font.PLAIN, 10));
				legendaIgual.setBounds(165, 75, 70, 18);
				painel.add(legendaIgual);
				
				// CAIXA PARA DIGITAR
				antesDoUpdate = new JTextField();
				antesDoUpdate.setBounds(250, 75, 100, 18);
				painel.add(antesDoUpdate);
				antesDoUpdate.setColumns(10);
		
				// ------------------------------------------------- //
				
				// LEGENDA
				JLabel legendaDepois = new JLabel("O(A)");
				legendaDepois.setForeground(Color.RED);
				legendaDepois.setFont(new Font("Arial", Font.PLAIN, 10));
				legendaDepois.setBounds(10, 100, 389, 14);
				painel.add(legendaDepois);
				
				// CAIXA DE SELE플O
				JComboBox coluna2 = new JComboBox();
				coluna2.setModel(new DefaultComboBoxModel(new String[] {"id", "setor", "modelo", "tamanho", "cor"}));
				coluna2.setBounds(55, 100, 90, 18);
				painel.add(coluna2);
				
				// LEGENDA
				JLabel legendaIgual2 = new JLabel(" VAI SER: ");
				legendaIgual2.setForeground(Color.RED);
				legendaIgual2.setFont(new Font("Arial", Font.PLAIN, 10));
				legendaIgual2.setBounds(165, 100, 92, 18);
				painel.add(legendaIgual2);
				
				// CAIXA PARA DIGITAR
				depoisDoUpdate = new JTextField();
				depoisDoUpdate.setBounds(250, 100, 100, 18);
				painel.add(depoisDoUpdate);
				depoisDoUpdate.setColumns(10);
				
				
				// -------- CRIA플O DO BOT홒 E A플O DO MESMO ---------- //
				
				JButton botao = new JButton("EXECUTAR");
				botao.addActionListener(new ActionListener() {
					public void actionPerformed(ActionEvent e) {
						Connection con = Conexao.getConnection();
						
//						String categoriaNew = (String) coluna2.getSelectedItem();
//						String valorNew = depoisDoUpdate.getText();
//						
//						String categoriaOld = (String) coluna.getSelectedItem();
//						String valorOld = antesDoUpdate.getText();
						
						String sql =  " update produtos set id = 19 where setor = 'esportes'; ";
										
						
						try {
							PreparedStatement st = con.prepareStatement(sql);
//							st.setString(1, "id");
//							st.setInt(2, 2);
//							
//							st.setString(3, "setor");
//							st.setString(4, "esportes");
							
							st.executeUpdate();
							
							
							st.close();
							
							
							
						} catch (SQLException e1) {
							// TODO Auto-generated catch block
							e1.printStackTrace();
						}
						
						JOptionPane.showMessageDialog(null, "DADOS ATUALIZADOS COM SUCESSO", "", -1);
						
						frame.dispose();
						Read.main();
						
						
						
					}
					
					
				});
				
				botao.setBounds(120, 130, 118, 20);
				painel.add(botao);
		
	}
	
	
}
